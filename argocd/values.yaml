encValues:
  dex.github.clientSecret: "AgBLiQhoTPPxUr0LxA7UznE0iZQZwiwvYNVZLKIjpZ0RjZZN/gd3sUjTzgXJPga3Fwch/k/3ClZ5jUm5vWTbs7b8i7CivIEMbpBqOahjdC5wgxliIcZ3eBfcl138rEq1G7R5e67RejcG2sW7Bi9Y54VAzucoClppX22zBPOc1TjHlCWGY4JBzZubgzRNMd70vXICAMdiQQc8gaB0dWOdCU3X11SK8NadPqSn+zcqikHsc++Ta9LykygYF/YdCq+CwzKCfhmF2aLROoKfIJ/4lTlQ8Z9bcsiHpP52tgt9E/HxDuZj4/cDLd3kN3h9g+LgPI8ZijC5cOvjq+N/7N8APTPEUyR2rFRCNqaVwM7tqYFc/aGJZqglhPpWOxV0C1AEocFxZLhvzOEF7FuGIewBd+BIkUlnSJqF/qOmj6hA56LPbTG/9VFf7e43hH5ViIBX/pMpRafPcA/YYNYq6hVloS87vFRJKzb2JHwyd5byOAPW6/bo30TiNK02laVrXxhrAWHbjCEYymPw1TAAsY9jxw4j8keYxMP/4wuVU8LfS+xZAe1uDYtuPfjxjY0J3SU4UC9kX6QP6VIh9dIcil6jKG76Gtus15vhmaIcr8dLQsJbV71goZ8U5NMQHENye3BlUMBpdsL/QzUrE03pgoxn3vOeRMWQyAeYh2rqcPsuwo/taGPaPy2PZS0YR5MMBICPdzK1UPxtEQ=="

defaultRepoUrl: 'https://github.com/aeternity/gitops-tools.git'
defaultTargetRevision: dev

applications:
  argocd:
    project: tools
    namespace: argocd
  sealed-secrets:
    project: tools
    namespace: sealed-secrets
  aws-load-balancer-controller:
    project: tools
    namespace: kube-system
  traefik:
    project: tools
    namespace: traefik

argo-cd:
  configs:
    secret:
      createSecret: true
  server:
    ingress:
      enabled: true
      annotations:
        kubernetes.io/ingress.class: traefik
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
      pathType: ImplementationSpecific
      hosts:
        - "argocd.dev.aeternity.io"
    extraArgs:
      - --insecure=true
    logLevel: debug
    config:
      # Argo CD's externally facing base URL (optional). Required when configuring SSO
      url: https://argocd.dev.aeternity.io/
      # Argo CD instance label key
      application.instanceLabelKey: argocd.argoproj.io/instance
      repositories: |
        - url: https://github.com/aeternity/gitops-tools.git
        - type: helm
          url: https://argoproj.github.io/argo-helm
          name: argo
        - type: helm
          url: https://bitnami-labs.github.io/sealed-secrets
          name: sealed-secrets
        - type: helm
          url: https://helm.traefik.io/traefik
          name: traefik
        - type: helm
          url: https://prometheus-community.github.io/helm-charts
          name: prometheus-community
        - type: helm
          url: https://aws.github.io/eks-charts
          name: eks
      dex.config: |
        connectors:
          - type: github
            id: github
            name: GitHub
            config:
              clientID: aabbccddeeff00112233
              clientSecret: $dex.github.clientSecret
              orgs:
              - name: aeternity
      # oidc.config: |
      #   requestedIDTokenClaims:
      #     groups:
      #       essential: true
      #   requestedScopes:
      #     - openid
      #     - profile
      #     - email
    additionalProjects:
      - name: tools
        namespace: argocd
        additionalLabels: {}
        additionalAnnotations: {}
        description: Tools used to run the environment
        sourceRepos:
          - 'https://github.com/aeternity/gitops-tools.git'
        destinations:
          - namespace: tools
            server: https://kubernetes.default.svc
          - namespace: argocd
            server: https://kubernetes.default.svc
          - namespace: sealed-secrets
            server: https://kubernetes.default.svc
          - namespace: kube-system
            server: https://kubernetes.default.svc
          - namespace: traefik
            server: https://kubernetes.default.svc
        clusterResourceWhitelist:
          - group: '*'
            kind: '*'
